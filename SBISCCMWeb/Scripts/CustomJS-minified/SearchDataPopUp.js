function backToparent() { parent.UpdateChildRecord() } function matchItemNextClick(a) { if ("" != a) { var e = "#" + a, t = "#" + a + "-2"; $(e).prev().removeClass("current"), $(e).prev().prev().removeClass("current"), $(e).addClass("current"), $(t).addClass("current") } } function matchItemPrevClick(a) { if ("" != a) { var e = "#" + a, t = "#" + a + "-2"; $(t).next().removeClass("current"), $(t).next().next().removeClass("current"), $(e).addClass("current"), $(t).addClass("current") } } function ReloadSuccess() { $("#divProgress").hide(), dynamicSearchDataHeight() } function dynamicSearchDataHeight() { } function updateSearchData(a, e, t, n) { $.magnificPopup.close(), $("#divProgress").show(); var o = "DUNSNO:" + a + "@#$FromPage:BadInputData@#$SrcRecId:" + t + "@#$InputId:" + n; $.ajax({ type: "POST", url: "/SearchData/UpdateSearchData?Parameters=" + ConvertEncrypte(encodeURI(o)).split("+").join("***"), success: function (a) { $("#divProgress").show(), $("#divSearchData").html(a), setTimeout(function () { $("#divProgress").hide() }, 2e4) }, error: function (a, e, t) { } }) } function toggleIcon(a) { $(a.target).prev().find(".more-less").toggleClass("fa-plus fa-minus") } function changeLanguage(a, e) { $("#Language").find("option").remove(), $("#Language").append("<option value=>Select Language</option>"), "us" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").val("en-US")) : "jp" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=ja-JP>Japanese</option>"), $("#Language").val("ja-JP")) : "tw" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=zh-hant-TW>Traditional Chinese</option>"), $("#Language").val("zh-hant-TW")) : "kr" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=ko-hang-KR>Hangul</option>"), $("#Language").val("ko-hang-KR")) : "cn" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=zh-hans-CN>Simplified Chinese</option>"), $("#Language").val("zh-hans-CN")) : ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=ja-JP>Japanese</option>"), $("#Language").append("<option value=zh-hans-CN>Simplified Chinese</option>"), $("#Language").append("<option value=zh-hant-TW>Traditional Chinese</option>"), $("#Language").append("<option value=ko-hang-KR>Hangul</option>"), $("#Language").val("en-US")), null != e && $("#Language").val(e) } function DomainOrEmailSearchData(a, e, t, n, o, r) { $("#divProgress").show(), $.magnificPopup.close(); var s = "searchValue:" + a + "@#$searchType:" + e + "@#$IsCleanSearch:" + t + "@#$Country:" + n + "@#$SrcRecId:" + o + "@#$InputId:" + r; $.ajax({ type: "POST", url: "/SearchData/DomainOrEmailPopup?Parameters=" + ConvertEncrypte(encodeURI(s)).split("+").join("***"), success: function (a) { $("#divSearchData").html(a) }, error: function (a, e, t) { } }), setTimeout(function () { $("#divProgress").hide() }, 1e4) } function RegistrationNumberSearchData(a, e, t, n, o, r) { $("#divProgress").show(), $.magnificPopup.close(); var s = "RegistrationNoValue:" + a + "@#$searchType:" + e + "@#$IsCleanSearch:" + t + "@#$Country:" + n + "@#$SrcRecId:" + o + "@#$InputId:" + r; $.ajax({ type: "POST", url: "/SearchData/RegistrationNumberPopup?Parameters=" + ConvertEncrypte(encodeURI(s)).split("+").join("***"), success: function (a) { $("#divSearchData").html(a) }, error: function (a, e, t) { } }), setTimeout(function () { $("#divProgress").hide() }, 1e4) } function SearchByAddressValidation() { var a = $("#txtAddress").val().trim(), e = $("#txtCity").val().trim(), t = $("#txtState").val().trim(); $("#txtZip").val().trim(); "" != a && "" != e && "" != t || "" != a ? $("#btnSearchByAddress").attr("class", "") : $("#btnSearchByAddress").attr("class", "disabled clsDisable") } function updateValidateInputMapAddress(a, e, t, n, o) { null != a && "" != a && $("#form_SearchData #txtAddress").val(a), null != e && "" != e && $("#form_SearchData #txtCity").val(e), null != t && "" != t && $("#form_SearchData #txtState").val(t), null != n && "" != n && $("#form_SearchData #txtZip").val(n), null != o && "" != o && $("select#Country").val(o) } function ShowLoadingImageCompany() { $("#imgCompanyLoadForCleanData").show() } function HideLoadingImageCompany() { $("#imgCompanyLoadForCleanData").hide() } function LoadTypeAhead() { var a = $("#Country").val(); $(".ui-front").addClass("cleanSearchTypeAhead"), $("#txtCompany").autocomplete({ source: function (e, t) { [], ShowLoadingImageCompany(), setTimeout(function () { $.ajax({ type: "GET", url: "/SearchData/SearchDataCompanyNameTypeAhead", data: { paramater: e.term, defaultCountryCode: a }, async: !1, contentType: "application/json; charset=utf-8", dataType: "json", success: function (a) { HideLoadingImageCompany(); var e = JSON.parse(a); if (null != e.error && null != e.error.errorMessage) return !1; t($.map(e.searchCandidates, function (a, e) { return { label: a.organization.primaryName + (null != a.organization.primaryAddress.streetAddress ? ", " + a.organization.primaryAddress.streetAddress.line1 : "") + (null != a.organization.primaryAddress.addressLocality ? ", " + a.organization.primaryAddress.addressLocality.name : ""), value: a.organization.primaryName, duns: a.organization.duns, address: (null != a.organization.primaryAddress.streetAddress ? ", " + a.organization.primaryAddress.streetAddress.line1 : "") + (null != a.organization.primaryAddress.addressLocality ? ", " + a.organization.primaryAddress.addressLocality.name : ""), address1: null != a.organization.primaryAddress.streetAddress ? a.organization.primaryAddress.streetAddress.line1 : "", city: null != a.organization.primaryAddress.addressLocality ? a.organization.primaryAddress.addressLocality.name : "", state: null != a.organization.primaryAddress.addressRegion ? a.organization.primaryAddress.addressRegion.name : "", country: null != a.organization.primaryAddress.addressCountry.isoAlpha2Code ? a.organization.primaryAddress.addressCountry.isoAlpha2Code : "", fullDetail: a } })) } }) }, 1e3) }, minLength: 3, select: function (a, e) { FinalResponse = JSON.stringify(e.item), $(".cleanSearchPopup #txtCompany").val(e.item.value), $(".cleanSearchPopup #txtAddress").val(e.item.address1), $(".cleanSearchPopup #txtCity").val(e.item.city), $(".cleanSearchPopup #txtState").val(e.item.state), $(".cleanSearchPopup #Country").val(e.item.country), $(".cleanSearchPopup #txtZip").val(""), $(".cleanSearchPopup #txtPhone").val(""), $("#btnSearchData").focus() }, open: function () { $(this).removeClass("ui-corner-all").addClass("ui-corner-top") }, close: function () { $(this).removeClass("ui-corner-top").addClass("ui-corner-all") } }) } $("body").on("click", ".btnUnselected", function () { $("#divProgress").show(), $(".btnSelected").each(function () { $(this).removeClass("btnSelected").addClass("btnUnselected") }), $(this).removeClass("btnUnselected").addClass("btnSelected"); var a = $(this).attr("data-val"); bootbox.confirm({ title: "<i class='fa fa-check-square-o' aria-hidden='true'></i> " + confirmBox, message: assignDUNS, callback: function (e) { if (e) { var t = $("#SrcId").attr("data-inputid"), n = $("#txtCompany").val(), o = $("#txtAddress").val(), r = $("#txtCity").val(), s = $("#txtState").val(), i = $("#txtZip").val(), d = $("select#Country").val(), l = $("#txtPhone").val(); $.ajax({ type: "POST", url: "/BadInputData/AcceptBIDMatch/", data: { InputId: t, Match: a, CompanyName: n, address: o, city: r, state: s, postalCode: i, countryISOAlpha2Code: d, phoneNbr: l }, dataType: "json", beforeSend: function () { }, success: function (a) { $("#SearchPopupModal").modal("hide"); var e = parent.$("#pageValue").val(), t = parent.$("#pageNo").val(), n = parent.$("#SortBy").val(), o = parent.$("#SortOrderNo").val(); 1 == parent.$("#dgBanInputData tbody tr").length && parseInt(t) > 1 && (t = parseInt(t) - 1), parent.UpdateChildRecord(), $("#divProgress").hide(), RefreshCleanDataGrid(t, n, o, e) } }) } else $(this).removeClass("btnSelected").addClass("btnUnselected") } }), $("#divProgress").hide() }), $("body").on("click", ".btnSelected", function () { $(this).removeClass("btnSelected").addClass("btnUnselected") }), $("body").on("click", ".clsViewMatchedItemDetails", function () { var a = $(this).closest("tr"), e = a.nextAll().eq(1), t = a.prevAll().eq(1), n = (a.attr("data-val"), ""), o = ""; e.length > 0 && (n = e.attr("id")), t.length > 0 && (o = t.attr("id")); var r = "id:0@#$childButtonId:" + a.attr("id") + "@#$dataNext:" + n + "@#$dataPrev:" + o + "@#$count:0@#$type:AdditionalFields@#$IsPartialView:false"; return $.ajax({ type: "GET", url: "/BadInputData/cShowMatchedItesDetailsView?Parameters=" + ConvertEncrypte(encodeURI(r)).split("+").join("***"), dataType: "HTML", success: function (a) { $("#MatchDetailModalMain").html(a), DraggableModalPopup("#MatchDetailModal") } }), !1 }), $("body").on("click", "#btnSearchData", function (a) { var e = $("#txtCompany").val(), t = $("#Country").val(), n = 0; if ("" == e || " " == e ? ($("#spnCompany").show(), $(".GoogleMapPopUp").hide(), n++) : $("#spnCompany").hide(), "" == t ? ($("#spnCountry").show(), n++) : $("#spnCountry").hide(), n > 0) return $(".customTable.inlinetable.searchCleanData tbody td").remove(), $(".customTable.inlinetable.searchCleanData tbody").html("<tr><td class='noContain' colspan='11'>No data are available</td><tr>"), !1; $("#divProgress").show() }), $("body").on("click", ".btnUpdateData", function (a) { var e = $("#SrcId").attr("data-inputid"), t = $("#txtCompany").val().trim(), n = $("#txtAddress").val(), o = $("#txtAddress2").val(), r = $("#txtCity").val(), s = $("#txtState").val(), i = $("#txtZip").val(), d = $("select#Country").val(), l = $("#txtPhone").val(), c = $("#Language").val(), p = 0; if ("" == t ? ($("#spnCompany").show(), p++) : $("#spnCompany").hide(), "" == d ? ($("#spnCountry").show(), p++) : $("#spnCountry").hide(), p > 0) return !1; "" != e && $.ajax({ type: "GET", contentType: "application/json; charset=utf-8", url: "/BadInputData/UpdateCompany", data: { InputId: e, company: t, address: n, city: r, state: s, postalCode: i, countryISOAlpha2Code: d, phoneNbr: l, isRejected: !1, inLanguage: c, Address2: o }, dataType: "Html", beforeSend: function () { }, success: function (a) { parent.loadWebGrid(a), parent.OnSuccess(), parent.changeLanguageHeader(), $("#SearchPopupModal").modal("hide") } }) }), $("body").on("click", ".searchChild", function () { $(".searchChild").each(function () { $(this).removeClass("current") }); var a = "#" + $(this).attr("id"); if (a.indexOf("-2") > -1) { $(a).addClass("current"); var e = a.replace("-2", ""); $(e).addClass("current") } else { var t = a + "-2"; $(a).addClass("current"), $(t).addClass("current") } }), $(window).resize(function () { dynamicSearchDataHeight() }), $("body").on("click", ".btnInvestigation", function () { $('input[name="__RequestVerificationToken"]').val(); var a = $("#txtCompany").val(), e = $("#Country").val(), t = $("#txtAddress").val(), n = $("#txtCity").val(), o = ($("#txtState").val(), $("#txtPhone").val()), r = $("#txtZip").val(), s = $("#SrcRecId").val(), i = $(this).attr("data-InputId"), d = $(this).attr("data-Tags"), l = $(this).attr("data-StreetName"), c = ConvertEncrypte(encodeURI("InputId:" + i + "@#$SrcId:" + s + "@#$Company:" + a + "@#$StreetName:" + l + "@#$Address:" + t + "@#$City:" + n + "@#$PostalCode:" + r + "@#$CountryCode:" + e + "@#$Tags:" + d + "@#$Phone:" + o)).split("+").join("***"); $.ajax({ type: "GET", url: "/ResearchInvestigation/iResearchInvestigationRecords?Parameters=" + c, dataType: "HTML", async: !1, success: function (a) { $("#InvestigateModalMain").html(a), DraggableModalPopup("#InvestigateModal") } }) }), $(".additional-main").on("hidden.bs.collapse", toggleIcon), $(".additional-main").on("shown.bs.collapse", toggleIcon), $("body").on("click", "#SearchPopupModal #lnkCollapse", function () { var a = !1; $("#SearchPopupModal #lnkCollapse i").hasClass("fa-minus") || (a = !0), $.ajax({ type: "GET", url: "/BadInputData/SetSession", contentType: "application/json; charset=utf-8", data: { IsExpandCleanData: a }, dataType: "json", success: function () { }, global: !1 }) }), $("body").on("click", ".AltCompany", function () { var a, e = $(this).attr("data-company"), t = $("#txtCompany").val(); a = e, $("#spnAltCompanyName").html(t), $(this).attr("data-company", t), $("#txtCompany").val(a), $("#txtCompany").attr("value", a) }), $("body").on("click", ".AltAddress", function () { var a = "", e = $(this).attr("data-Address"), t = $("#txtAddress").val(); tempvalue = e, $("#spnAltAddress").html(t), $(this).attr("data-address", t), $("#txtAddress").val(tempvalue), $("#txtAddress").attr("value", tempvalue), a = ""; var n = $(this).attr("data-city"), o = $("#txtCity").val(); tempvalue = n, $("#spnAltCity").html(o), $(this).attr("data-city", o), $("#txtCity").val(tempvalue), $("#txtCity").attr("value", tempvalue), a = ""; var r = $(this).attr("data-state"), s = $("#txtState").val(); a = r, $("#spnAltState").html(s), $(this).attr("data-state", s), $("#txtState").val(a), $("#txtState").attr("value", tempvalue), a = ""; var i = $(this).attr("data-postalcode"), d = $("#txtZip").val(); a = i, $("#spnAltPostalCode").html(d), $(this).attr("data-postalcode", d), $("#txtZip").val(a), $("#txtZip").attr("value", tempvalue), a = ""; var l = $(this).attr("data-address2"), c = $("#txtAddress2").val(); a = l, $("#spnAltAddress2").html(c), $(this).attr("data-address2", c), $("#txtAddress2").val(a), $("#txtAddress2").attr("value", tempvalue), SearchByAddressValidation() }), $("body").on("click", ".btnDomainOrEmailSearch", function () { var a = $("#HiddenEmail").val(), e = $("#HiddenWebsite").val(), t = $("#SrcRecId").val(), n = $("#InputId").val(), o = "", r = ""; "" != a && "" != e || "" == a && "" == e ? (r = "domain", o = e) : "" != a ? (r = "email", o = a) : "" != e && (r = "domain", o = e); var s = ConvertEncrypte(encodeURI("type:" + r + "@#$searchvalue:" + o + "@#$SrcRecId:" + t + "@#$InputId:" + n)).split("+").join("***"); return $(".clsAdditionActionFilter .input-group-btn").removeClass("open"), $.ajax({ type: "GET", url: "/SearchData/DomainOrEmailPopup?Parameters=" + s + "&IsCleanSearch=true", dataType: "HTML", async: !1, success: function (a) { $("#SearchByAltFieldsModalMain").html(a), DraggableModalPopup("#SearchByAltFieldsModal") } }), !1 }), $("body").on("click", "#btnBingSearch", function () { var a = $("#txtCompany").val(), e = $("#txtAddress").val(), t = $("#txtCity").val(), n = $("#txtState").val(), o = $("#txtPhone").val(), r = $("#txtZip").val(), s = (a = "" == a ? "" : a + " ") + (e = "" == e ? "" : e + " ") + (t = "" == t ? "" : t + " ") + (n = "" == n ? "" : n + " ") + (o = "" == o ? "" : o + " ") + (r = "" == r ? "" : r + " ") + $("#Country").val(); $(".clsAdditionActionFilter .input-group-btn").removeClass("open"), $.ajax({ type: "GET", url: "/SearchData/BingSearch?Parameters=" + ConvertEncrypte(encodeURI(s)).split("+").join("***"), dataType: "HTML", async: !1, success: function (a) { $("#divProgress").hide(), $("#BingSearchModalMain").html(a), DraggableModalPopup("#BingSearchModal") } }) }), $("body").on("click", "#btnSearchByCompany", function (a) { var e = $("#Country").val(), t = $("#txtCompany").val(), n = $("#ExcludeNonHeadQuarters").prop("checked"), o = $("#ExcludeNonMarketable").prop("checked"), r = $("#ExcludeOutofBusiness").prop("checked"), s = $("#ExcludeUndeliverable").prop("checked"), i = $("#ExcludeUnreachable").prop("checked"), d = $('input[name="__RequestVerificationToken"]').val(), l = 0; "" == t ? ($("#spnCompany").show(), l++) : $("#spnCompany").hide(), "" == e ? ($("#spnCountry").show(), l++) : $("#spnCountry").hide(); var c = new FormData; if (c.append("Company", t), c.append("Country", e), c.append("ExcludeNonHeadQuarters", n), c.append("ExcludeNonMarketable", o), c.append("ExcludeOutofBusiness", r), c.append("ExcludeUndeliverable", s), c.append("ExcludeUnreachable", i), c.append("__RequestVerificationToken", d), c.append("btnSearchData", "SearchByCompany"), l > 0) return $(".customTable.inlinetable.searchCleanData tbody td").remove(), $(".customTable.inlinetable.searchCleanData tbody").html("<tr><td class='noContain' colspan='11'>No data are available</td><tr>"), !1; $("#divProgress").show(), $.ajax({ type: "POST", url: "/BadInputData/SearchData", data: c, dataType: "HTML", contentType: !1, processData: !1, async: !1, success: function (a) { $("#divSearchData").html(a) }, error: function (a, e, t) { } }) }), $("body").on("click", "#btnSearchByAddress", function (a) { var e = $("#Country").val(), t = $("#txtAddress").val(), n = $("#txtAddress2").val(), o = $("#txtCity").val(), r = $("#txtState").val(), s = $("#txtPhone").val(), i = $("#txtZip").val(), d = ($("#txtCompany").val(), $("#ExcludeNonHeadQuarters").prop("checked")), l = $("#ExcludeNonMarketable").prop("checked"), c = $("#ExcludeOutofBusiness").prop("checked"), p = $("#ExcludeUndeliverable").prop("checked"), u = $("#ExcludeUnreachable").prop("checked"), h = $('input[name="__RequestVerificationToken"]').val(), v = new FormData; v.append("Company", ""), v.append("Country", e), v.append("Address", t), v.append("Address2", n), v.append("City", o), v.append("State", r), v.append("Phone", s), v.append("Zip", i), v.append("ExcludeNonHeadQuarters", d), v.append("ExcludeNonMarketable", l), v.append("ExcludeOutofBusiness", c), v.append("ExcludeUndeliverable", p), v.append("ExcludeUnreachable", u), v.append("__RequestVerificationToken", h), v.append("btnSearchData", "SearchByAddress"), $.ajax({ type: "POST", url: "/BadInputData/SearchData", data: v, dataType: "HTML", contentType: !1, processData: !1, async: !1, success: function (a) { $("#divSearchData").html(a) }, error: function (a, e, t) { } }) }), $("body").on("click", "#btnPurgeData", function (a) { var e = $('input[name="__RequestVerificationToken"]').val(), t = $("#SrcRecId").val(), n = $("#InputId").val(), o = "/StewardshipPortal/StewPurgeSingleRecord?Parameters=" + ConvertEncrypte(encodeURI("InputId:" + n + "@#$SrcRecordId:" + t + "@#$Queue:BID")).split("+").join("***"); bootbox.confirm({ title: "<i class='fa fa-check-square-o' aria-hidden='true'></i> " + confirmBox, message: cleansearchpurgeRecord, callback: function (a) { a && $.ajax({ type: "POST", url: o, headers: { __RequestVerificationToken: e }, dataType: "json", contentType: "application/json; charset=UTF-8", async: !1, cache: !1, success: function (a) { parent.ShowMessageNotification("success", a, !0, !0, parent.callbackRejectPurgeData) }, error: function (a, e, t) { } }) } }) }), $("body").on("blur", "#txtCompany", function () { "" == $("#txtCompany").val().trim() ? $("#btnSearchByCompany").attr("class", "disabled clsDisable") : $("#btnSearchByCompany").attr("class", "") }), $("body").on("blur", "#txtAddress", function () { SearchByAddressValidation() }), $("body").on("blur", "#txtCity", function () { SearchByAddressValidation() }), $("body").on("blur", "#txtState", function () { SearchByAddressValidation() }), $("body").on("blur", "#txtZip", function () { SearchByAddressValidation() }), $("li.dropdown.mega-dropdown a").on("click", function (a) { $(this).parent().toggleClass("open") }), $(document).on("click", "#btnValidateInputAddress", function () { var a = $("#txtAddress").val(), e = $("#txtAddress2").val(), t = $("#txtCity").val(), n = $("#txtState").val(), o = $("#txtZip").val(), r = $("select#Country").val(), s = ""; null != a && "" != a && (s += a), null != e && "" != e && (s += "," + e), null != t && "" != t && (s += "," + t), null != n && "" != n && (s += "," + n), null != o && "" != o && (s += "," + o), null != r && "" != r && (s += "," + r); var i = "Address:" + s + "@#$IsFromSearch:true", d = parent.ConvertEncrypte(encodeURI(i)).split("+").join("***"); $.ajax({ type: "GET", url: "/SearchData/ValidateGoogleMapPopUp?Parameters=" + d, dataType: "HTML", async: !1, success: function (a) { $("#GoogleMapModalMain").html(a), DraggableModalPopup("#GoogleMapModal") } }) }), $("body").on("click", "#btnGoogleSearch", function () { var a = $("#txtCompany").val(), e = $("#txtAddress").val(), t = $("#txtCity").val(), n = $("#txtState").val(), o = $("#txtPhone").val(), r = $("#txtZip").val(), s = "https://www.google.com/search?q=Establishment : " + ((a = "" == a ? "" : a + " ") + (e = "" == e ? "" : e + " ") + (t = "" == t ? "" : t + " ") + (n = "" == n ? "" : n + " ") + (o = "" == o ? "" : o + " ") + (r = "" == r ? "" : r + " ") + $("#Country").val()); window.open(s) }), $("body").on("click", ".GoogleMapPopUp", function () { return $.ajax({ type: "GET", url: "/SearchData/GoogleMapPopUp", dataType: "HTML", async: !1, success: function (a) { $("#GoogleMapPopUpModalMain").html(a), DraggableModalPopup("#GoogleMapPopUpModal") } }), !1 });