function rbtnChangeEvent() { var e = $("input[name=FileFormat]:checked").val(); "excel" == e.toLowerCase() ? ($("#allowedFormats").val("xls,xlsx"), $("#IdFile").attr("accept", ".xls,.xlsx"), $(".divFrmtValue").hide()) : "csv" == e.toLowerCase() ? ($("#allowedFormats").val("csv"), $("#IdFile").attr("accept", ".csv"), $(".divFrmtValue").hide()) : "tsv" != e.toLowerCase() && "delimiter" != e.toLowerCase() || ($("#allowedFormats").val("txt"), $("#IdFile").attr("accept", ".txt"), "delimiter" == e.toLowerCase() ? $(".divFrmtValue").show() : $(".divFrmtValue").hide()) } function sumbitCommandMapping() { var e = [], a = [], t = ($("#Tags").val(), $("#IsTag").val()), o = $("#LicenseEnableTags").val(), s = $("#IsInLanguage").val(), r = $(".Language option:selected").val(), n = $("#ImportType").val(), l = 0, i = $("#ConfigurationName").val(); $("#IdFile").val(); if ("delimiter" == $("input[name=FileFormat]:checked").val().toLowerCase() && "" == $("#Formatvalue").val()) return $("#IdFile").val(""), $("#Formatvalue").parent().addClass("has-error"), !1; if ($(".SelectBox").each(function () { a.push($(this).val()), $(this).parent().removeClass("has-error") }), a.length > 0) for (var d = 0; d < a.length; d++) { "data import" == n.toLowerCase() && (0 != d && 1 != d && 7 != d || "0" != $("#DataColumn-" + d).val() && null != $("#DataColumn-" + d).val() || ($("#DataColumn-" + d).parent().addClass("has-error"), l += 1)), "match refresh" == n.toLowerCase() && (0 != d && 1 != d && 2 != d || "0" != $("#DataColumn-" + d).val() && null != $("#DataColumn-" + d).val() || ($("#DataColumn-" + d).parent().addClass("has-error"), l += 1)), "orb data import" == n.toLowerCase() && (0 != d && 1 != d && 7 != d || "0" != $("#DataColumn-" + d).val() && null != $("#DataColumn-" + d).val() || ($("#DataColumn-" + d).parent().addClass("has-error"), l += 1)), "orb match refresh" == n.toLowerCase() && 0 == d && ("0" != $("#DataColumn-" + d).val() && null != $("#DataColumn-" + d).val() || ($("#DataColumn-" + d).parent().addClass("has-error"), l += 1)); for (var c = 0; c <= a.length; c++)if (d != c && a[d] == a[c]) { 1; var C = $("#DataColumn-" + d).val(), p = $("#DataColumn-" + c).val(); (parseInt(C) > 0 || parseInt(p) > 0) && (l += 1, parseInt(C) > 0 && $("#DataColumn-" + d).parent().addClass("has-error"), parseInt(p) > 0 && $("#DataColumn-" + c).parent().addClass("has-error")) } } return "" == i ? ($("#spnUConfigName").show(), l++) : $("#spnUConfigName").hide(), !(l > 0) && (a = [], $(".SelectBox").each(function () { "0" == $(this).val() ? a.push("") : "select language" == $("option:selected", $(this)).text().toLowerCase() ? a.push("") : a.push($("option:selected", $(this)).text()), $(this).parent().removeClass("has-error") }), "false" == s.toLowerCase() && "Data Import" == n && ($("#InLanguage").val(r), a[9] = ""), "true" == o.toLowerCase() ? "false" == t.toLowerCase() && "Match Refresh" == n && (a[4] = "") : "Match Refresh" == n && a.splice(4, 0, ""), "false" == s.toLowerCase() && "Orb Data Import" == n && ($("#InLanguage").val(r), a[9] = ""), "false" == s.toLowerCase() && "Orb Match Refresh" == n && ($("#InLanguage").val(r), a[1]), $("#ColumnMapping").val(a.toString()), $("#DataColumn-0 option").each(function () { e.push($(this).text()) }), $("#OriginalColumns").val(e.toString()), $("#UploadConfigurationModal").modal("hide"), !0) } function InsertCommandSuccess() { $.pjax({ url: "/Portal/UploadConfiguration", container: "#divPartialCommandMapping", timeout: 5e4 }).done(function () { InitPortalUploadConfigurationDataTable(), pageSetUp(), 0 == $("table#tbCmndMapping tbody tr").length ? $("table#tbCmndMapping").attr("disabled", !0) : $("table#tbCmndMapping tbody tr:first").addClass("current") }) } function ResetMapping() { var e = $("input[name=FileFormat]:checked").val(); $("#IdFile").val(""), "delimiter" != e.toLowerCase() && $("#Formatvalue").val("|"), $("Tags").val(""), $(".SelectBox").each(function () { $(this).find("option").remove() }) } function ResetFields() { $("#ConfigurationName").val(""), $("#ImportType").val("Data Import"), $("#ColumnMapping").val(""), $("#InLanguage").val(""), $("#Tags").val(""), $("#Id").val("0"), $("#IsDefault").attr("checked", !1) } function LoadCommandMapping(e) { var a = $('input[name="__RequestVerificationToken"]').val(); $.ajax({ type: "POST", url: "/CommandMapping/BindColumnMapping", headers: { __RequestVerificationToken: a }, data: e, dataType: "html", async: !1, contentType: !1, processData: !1, success: function (e) { $("#DivPartialBindColumnMapping").html(e); var a = $("#ImportType").val(); $(".SelectBox").each(function () { if ("data import" == a.toLowerCase()) { var e = $(this).closest("tr").find(".spnExcelColumn").attr("data-val"), t = 0; $(".SelectBox option").each(function () { var a = $(this).text(); e == a && (t = $(this).val()), "country" != a.toLowerCase() && "countrycode" != a.toLowerCase() && "countryisoalpha2code" != a.toLowerCase() && "address1_country" != a.toLowerCase() || "countryisoalpha2code" != e.toLowerCase() && "country" != e.toLowerCase() || (t = $(this).val()), "zipcode" != a.toLowerCase() && "postalcode" != a.toLowerCase() && "zip" != a.toLowerCase() && "address1_postalcode" != a.toLowerCase() || "postalcode" == e.toLowerCase() && (t = $(this).val()), "phoneno" != a.toLowerCase() && "phonenbr" != a.toLowerCase() && "phone" != a.toLowerCase() && "address1_telephone1" != a.toLowerCase() || "phonenbr" == e.toLowerCase() && (t = $(this).val()), "company" != a.toLowerCase() && "companyname" != a.toLowerCase() && "organization" != a.toLowerCase() && "address1_name" != a.toLowerCase() || "companyname" == e.toLowerCase() && (t = $(this).val()), "srcrecordid" != a.toLowerCase() && "src recordid" != a.toLowerCase() && "accountid" != a.toLowerCase() || "srcrecordid" == e.toLowerCase() && (t = $(this).val()), "language" != a.toLowerCase() && "language values" != a.toLowerCase() && "languagevalues" != a.toLowerCase() && "language code" != a.toLowerCase() && "languagecode" != a.toLowerCase() || "inlanguage" == e.toLowerCase() && (t = $(this).val()), "address" != a.toLowerCase() && "street line address1" != a.toLowerCase() && "address1_line1" != a.toLowerCase() || "street line address1" == e.toLowerCase() && (t = $(this).val()), "address1" != a.toLowerCase() && "street line address2" != a.toLowerCase() && "address1_line2" != a.toLowerCase() || "street line address2" == e.toLowerCase() && (t = $(this).val()), "altaddress" != a.toLowerCase() && "street line alt. address1" != a.toLowerCase() && "address2_line1" != a.toLowerCase() || "street line alt. address1" == e.toLowerCase() && (t = $(this).val()), "altaddress1" != a.toLowerCase() && "street line alt. address2" != a.toLowerCase() || "street line alt. address2" == e.toLowerCase() && (t = $(this).val()), "state" != a.toLowerCase() && "address1_stateorprovince" != a.toLowerCase() || "state (state is required for us)" == e.toLowerCase() && (t = $(this).val()), "address1_city" == a.toLowerCase() && "city" == e.toLowerCase() && (t = $(this).val()), "tags" != a.toLowerCase() && "tag" != a.toLowerCase() || "tags" == e.toLowerCase() && (t = $(this).val()) }), $(this).val(t) } if ("Match Refresh" == a) { e = $(this).closest("tr").find(".spnExcelColumn").attr("data-val"), t = 0; $(".SelectBox option").each(function () { var a = $(this).text(); e == a && (t = $(this).val()), "country" != a.toLowerCase() && "countrycode" != a.toLowerCase() && "countryisoalpha2code" != a.toLowerCase() && "address1_country" != a.toLowerCase() || "countryisoalpha2code" != e.toLowerCase() && "country" != e.toLowerCase() || (t = $(this).val()), "srcrecordid" != a.toLowerCase() && "src recordid" != a.toLowerCase() && "accountid" != a.toLowerCase() || "srcrecordid" == e.toLowerCase() && (t = $(this).val()), "tags" != a.toLowerCase() && "tag" != a.toLowerCase() || "tags" == e.toLowerCase() && (t = $(this).val()) }), $(this).val(t) } if ("Orb Data Import" == a) { e = $(this).closest("tr").find(".spnExcelColumn").attr("data-val"), t = 0; $(".SelectBox option").each(function () { var a = $(this).text(); e == a ? t = $(this).val() : "srcrecordid" == a.toLowerCase() || "src recordid" == a.toLowerCase() || "accountid" == a.toLowerCase() || "company id" == a.toLowerCase() || "companyid" == a.toLowerCase() ? "srcrecordid" == e.toLowerCase() && (t = $(this).val()) : "company" == a.toLowerCase() || "companyname" == a.toLowerCase() || "organization" == a.toLowerCase() || "address1_name" == a.toLowerCase() ? "companyname" == e.toLowerCase() && (t = $(this).val()) : "address" == a.toLowerCase() || "address1" == a.toLowerCase() || "street line address" == a.toLowerCase() || "street line address1" == a.toLowerCase() || "address1_line1" == a.toLowerCase() ? "street line address1" == e.toLowerCase() && (t = $(this).val()) : "address2" == a.toLowerCase() || "street line address2" == a.toLowerCase() || "address1_line2" == a.toLowerCase() ? "street line address2" == e.toLowerCase() && (t = $(this).val()) : "address1_city" == a.toLowerCase() || "city" == a.toLowerCase() ? "city" == e.toLowerCase() && (t = $(this).val()) : "state" == a.toLowerCase() || "address1_stateorprovince" == a.toLowerCase() ? "state (state is required for us)" == e.toLowerCase() && (t = $(this).val()) : "zipcode" == a.toLowerCase() || "postalcode" == a.toLowerCase() || "zip" == a.toLowerCase() || "address1_postalcode" == a.toLowerCase() ? "postalcode" == e.toLowerCase() && (t = $(this).val()) : "country" == a.toLowerCase() || "countrycode" == a.toLowerCase() || "countryisoalpha2code" == a.toLowerCase() || "address1_country" == a.toLowerCase() ? "countryisoalpha2code" != e.toLowerCase() && "country" != e.toLowerCase() || (t = $(this).val()) : "phoneno" == a.toLowerCase() || "phonenbr" == a.toLowerCase() || "phone" == a.toLowerCase() || "address1_telephone1" == a.toLowerCase() ? "phonenbr" == e.toLowerCase() && (t = $(this).val()) : "tags" == a.toLowerCase() || "tag" == a.toLowerCase() ? "tags" == e.toLowerCase() && (t = $(this).val()) : "altaddress" == a.toLowerCase() || "altaddress1" == a.toLowerCase() || "street line alt. address" == a.toLowerCase() || "street line alt. address1" == a.toLowerCase() || "address_line1" == a.toLowerCase() || "address1_line1" == a.toLowerCase() ? "street line alt. address1" == e.toLowerCase() && (t = $(this).val()) : "altaddress2" == a.toLowerCase() || "street line alt. address2" == a.toLowerCase() ? "street line alt. address2" == e.toLowerCase() && (t = $(this).val()) : "orbnum" != a.toLowerCase() && "orb num" != a.toLowerCase() && "orb number" != a.toLowerCase() && "orbnumber" != a.toLowerCase() || "orbnum" == e.toLowerCase() && (t = $(this).val()) }), $(this).val(t) } }), $(".chzn-select").length > 0 && $(".chzn-select").chosen().change(function (e) { e.target == this && $("#Tags").val($(this).val()) }) } }) } $(document).ready(function () { var e = $("#ColumnMapping").val(); if (null != e && "" != e) { var a = e.split(","), t = 0; $(".SelectBox").each(function () { var e = $("#LicenseEnableTags").val(); 10 === t && "false" == e.toLowerCase() && t++ , "" == a[t] ? $(this).val("0") : $("#" + $(this).attr("id") + " option").filter(function (e) { return $(this).text() === a[t] }).attr("selected", "selected"), t++ }); var o = $("#TagList").val(); null != o && "" != o && (o = o.split(",")), null == o && "" == o || ($(".chzn-select option").each(function () { for (var e = 0; e < o.length; e++)$(this).val() == o[e] && $(this).attr("selected", "selected") }), $("#Tags").val(o)) } $(".chzn-select").length > 0 && $(".chzn-select").chosen().change(function (e) { e.target == this && $("#Tags").val($(this).val()) }) }), $("body").on("change", "#IdFile", function () { var e = $("#Formatvalue").val(); if ("delimiter" == $("input[name=FileFormat]:checked").val().toLowerCase()) { if ("" == $("#Formatvalue").val()) return $("#IdFile").val(""), $("#Formatvalue").parent().addClass("has-error"), !1 } else e = ""; if ("" != $("#file").val()) { var a = $("#allowedFormats").val().split(","); if (-1 == $.inArray($(this).val().split(".").pop().toLowerCase(), a)) parent.ShowMessageNotification("success", fileFormatsAllowed + a.join(", "), !1), $("#IdFile").val(""); else { if (File) var t = new FormData; var o = $("#ImportType").val(); null != $("#IdFile")[0].files[0] && (t.append("file", $(this)[0].files[0]), t.append("ImportType", o), t.append("CustmDelimtr", e), LoadCommandMapping(t)) } } rbtnChangeEvent() }), $("body").on("change", ".rbtnFile", function () { rbtnChangeEvent(), ResetMapping() }), $("body").on("click", "#AddCommandLine", function () { $.ajax({ type: "GET", url: "/CommandMapping/CreateCommandMapping", dataType: "html", success: function (e) { $("#divPartialCommandMapping").html(e) } }) }), $("body").on("change", "#ImportType", function () { var e = new FormData, a = $("#ImportType").val(), t = $("#Formatvalue").val(); e.append("ImportType", a), e.append("CustmDelimtr", t), LoadCommandMapping(e), rbtnChangeEvent(), $("#IdFile").val("") }), $(document).on("click", "#Previous", function () { var e = $(".AAAA").children(".tab-pane.active").attr("id"); if ("tab2" == e) { $(".AAAA").children(".tab-pane").each(function () { $(this).removeClass("active") }); var a = $("#" + e).prev().attr("id"); $("#" + a).addClass("active"), $("#Next").parent().show(), $("#" + a).is(":first-child") && $("#Previous").parent().hide() } }), $(document).on("click", "#Next", function () { var e = $("#Id").val(), a = $("#ConfigurationName").val(), t = $("#IdFile").val(), o = 0; if ("" == a ? ($("#spnUConfigName").show(), o++) : $("#spnUConfigName").hide(), "" == t && 0 == e ? ($("#spnfile").show(), o++) : $("#spnfile").hide(), o > 0) return !1; var s = $(".AAAA").children(".tab-pane.active").attr("id"); if ("tab1" == s) { $(".AAAA").children(".tab-pane").each(function () { $(this).removeClass("active") }); var r = $("#" + s).next().attr("id"); $("#" + r).addClass("active"), $("#Previous").parent().show(), $("#" + r).is(":last-child") && $("#Next").parent().hide() } });