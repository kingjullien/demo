function matchItemNextClick(a) { if ("" != a) { var e = "#" + a, t = "#" + a + "-2"; $(e).prev().removeClass("current"), $(e).prev().prev().removeClass("current"), $(e).addClass("current"), $(t).addClass("current") } } function matchItemPrevClick(a) { if ("" != a) { var e = "#" + a, t = "#" + a + "-2"; $(t).next().removeClass("current"), $(t).next().next().removeClass("current"), $(e).addClass("current"), $(t).addClass("current") } } function ReloadSuccess() { setup_dashboard_widgets_desktop() } function updateSearchData(a) { var e = "DUNSNO:" + a + "@#$FromPage:SearchData@#$SrcRecId:@#$InputId:"; $("#divProgress").show(), $.magnificPopup.close(), $.ajax({ type: "POST", url: "/SearchData/UpdateSearchData?Parameters=" + ConvertEncrypte(encodeURI(e)).split("+").join("***"), success: function (a) { $("#divSearchData").html(a), $("#SearchByAltFieldsModal").modal("hide"), resetValue() }, error: function (a, e, t) { } }), setTimeout(function () { $("#divProgress").hide() }, 1e4) } function DomainOrEmailSearchData(a, e, t, n) { $("#divProgress").show(), $.magnificPopup.close(); var o = "searchValue:" + a + "@#$searchType:" + e + "@#$IsCleanSearch:" + t + "@#$Country:" + n; $.ajax({ type: "POST", url: "/SearchData/DomainOrEmailPopup?Parameters=" + ConvertEncrypte(encodeURI(o)).split("+").join("***"), success: function (a) { $("#divSearchData").html(a), $("#SearchByAltFieldsModal").modal("hide"), resetValue() }, error: function (a, e, t) { } }), setTimeout(function () { $("#divProgress").hide() }, 1e4) } function RegistrationNumberSearchData(a, e, t, n, o, r) { $("#divProgress").show(), $.magnificPopup.close(); var i = "RegistrationNoValue:" + a + "@#$searchType:" + e + "@#$IsCleanSearch:" + t + "@#$Country:" + n + "@#$SrcRecId:" + o + "@#$InputId:" + r; $.ajax({ type: "POST", url: "/SearchData/RegistrationNumberPopup?Parameters=" + ConvertEncrypte(encodeURI(i)).split("+").join("***"), success: function (a) { $("#divSearchData").html(a), $("#SearchByAltFieldsModal").modal("hide") }, error: function (a, e, t) { } }), setTimeout(function () { $("#divProgress").hide() }, 1e4) } function updateValidateInputMapAddress(a, e, t, n, o) { $.magnificPopup.close(), null != a && "" != a && $("#txtAddress").val(a), null != e && "" != e && $("#txtCity").val(e), null != t && "" != t && $("#txtState").val(t), null != n && "" != n && $("#txtZip").val(n), null != o && "" != o && $("select#Country").val(o) } function changeLanguage(a) { $("#Language").find("option").remove(), $("#Language").append("<option value=>Select Language</option>"), "us" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").val("en-US")) : "jp" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=ja-JP>Japanese</option>"), $("#Language").val("ja-JP")) : "tw" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=zh-hant-TW>Traditional Chinese</option>"), $("#Language").val("zh-hant-TW")) : "kr" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=ko-hang-KR>Hangul</option>"), $("#Language").val("ko-hang-KR")) : "cn" == a.toLowerCase() ? ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=zh-hans-CN>Simplified Chinese</option>"), $("#Language").val("zh-hans-CN")) : ($("#Language").append("<option value=en-US>English</option>"), $("#Language").append("<option value=ja-JP>Japanese</option>"), $("#Language").append("<option value=zh-hans-CN>Simplified Chinese</option>"), $("#Language").append("<option value=zh-hant-TW>Traditional Chinese</option>"), $("#Language").append("<option value=ko-hang-KR>Hangul</option>"), $("#Language").val("en-US")) } function resetValue() { $("#txtCompany").val(""), $("#txtAddress").val(""), $("#txtAddress2").val(""), $("#txtCity").val(""), $("#txtState").val(""), $("#txtPhone").val(""), $("#txtZip").val(""), $("#Country").val("US"), $("#Language").val("en-US"), $("#ExcludeNonHeadQuarters").prop("checked", !1), $("#ExcludeNonMarketable").prop("checked", !1), $("#ExcludeOutofBusiness").prop("checked", !1), $("#ExcludeUndeliverable").prop("checked", !1), $("#ExcludeUnreachable").prop("checked", !1), $("#spnCompany").hide(), $("#spnCountry").hide() } function backToparent() { $.magnificPopup.close() } function SearchData(a) { $("#divProgress").show(), $.ajax({ type: "POST", url: "/SearchData/Index", data: a, dataType: "HTML", contentType: !1, processData: !1, async: !1, success: function (a) { $("#divSearchData").html(a), setup_dashboard_widgets_desktop() }, error: function (a, e, t) { } }) } function SetSearchByCompanyValidation() { "" == $("#txtCompany").val().trim() ? $("#btnSearchByCompany").attr("class", "disabled clsDisable") : $("#btnSearchByCompany").attr("class", "") } function SetSearchByAddressValidation() { var a = $("#txtAddress").val().trim(), e = $("#txtCity").val().trim(), t = $("#txtState").val().trim(), n = $("#txtZip").val().trim(); "" != a && "" != e && "" != t || "" != a && "" != n ? $("#btnSearchByAddress").attr("class", "") : $("#btnSearchByAddress").attr("class", "disabled clsDisable") } function ShowLoadingImageCompany() { $("#imgCompanyLoad").show() } function HideLoadingImageCompany() { $("#imgCompanyLoad").hide() } function LoadTypeAhead() { var a = $("#Country").val(); if (null != a && "" != a) var e = function (e, t) { [], ShowLoadingImageCompany(), setTimeout(function () { $.ajax({ type: "GET", url: "/SearchData/SearchDataCompanyNameTypeAhead", data: { paramater: e.term, defaultCountryCode: a }, async: !1, contentType: "application/json; charset=utf-8", dataType: "json", success: function (a) { HideLoadingImageCompany(); var e = JSON.parse(a); if (null != e.error && null != e.error.errorMessage) return !1; t($.map(e.searchCandidates, function (a, e) { return { label: a.organization.primaryName + (null != a.organization.primaryAddress.streetAddress ? ", " + a.organization.primaryAddress.streetAddress.line1 : "") + (null != a.organization.primaryAddress.addressLocality ? ", " + a.organization.primaryAddress.addressLocality.name : ""), value: a.organization.primaryName, duns: a.organization.duns, address: (null != a.organization.primaryAddress.streetAddress ? ", " + a.organization.primaryAddress.streetAddress.line1 : "") + (null != a.organization.primaryAddress.addressLocality ? ", " + a.organization.primaryAddress.addressLocality.name : ""), address1: null != a.organization.primaryAddress.streetAddress ? a.organization.primaryAddress.streetAddress.line1 : "", city: null != a.organization.primaryAddress.addressLocality ? a.organization.primaryAddress.addressLocality.name : "", state: null != a.organization.primaryAddress.addressRegion ? a.organization.primaryAddress.addressRegion.name : "", country: null != a.organization.primaryAddress.addressCountry.isoAlpha2Code ? a.organization.primaryAddress.addressCountry.isoAlpha2Code : "", fullDetail: a } })) } }) }, 1e3) }; $("#txtCompany").autocomplete({ source: e, minLength: 3, select: function (a, e) { FinalResponse = JSON.stringify(e.item), $(".divSearchOption #txtCompany").val(e.item.value), $(".divSearchOption #txtAddress").val(e.item.address1), $(".divSearchOption #txtCity").val(e.item.city), $(".divSearchOption #txtState").val(e.item.state), $(".divSearchOption #Country").val(e.item.country), $(".divSearchOption #txtZip").val(""), $(".divSearchOption #txtPhone").val(""), $(".divSearchOption #btnSearchData").focus() }, open: function () { $(this).removeClass("ui-corner-all").addClass("ui-corner-top") }, close: function () { $(this).removeClass("ui-corner-top").addClass("ui-corner-all") } }) } function addHeight600Class(a) { a ? $(".popupiResearchInvestigationTargeted").addClass("height600") : $(".popupiResearchInvestigationTargeted").removeClass("height600") } String.prototype.replaceAll = function (a, e) { return this.replace(new RegExp(a, "g"), e) }, $(document).ajaxStart(function () { $("#divProgress").show() }).ajaxStop(function () { $("#divProgress").hide() }), $(document).ready(function () { var a = $("#hdnCountry").val(); $("select#Country").val(encodeURI(a)), $("select#Language").val("en-US"), changeLanguage($("#Country").val()), SetSearchByCompanyValidation(), SetSearchByAddressValidation() }), $("body").on("click", ".clsViewMatchedItemDetails", function () { $(".currentRow").each(function () { $(this).removeClass("current") }), $(this).parent().parent().parent().addClass("current"), $(this).parent().parent().parent().next().addClass("current"); var a = $(this).closest("tr"), e = a.nextAll().eq(1), t = a.prevAll().eq(1), n = (a.attr("data-val"), ""), o = ""; e.length > 0 && (n = e.attr("id")), t.length > 0 && (o = t.attr("id")); var r = "id:0@#$childButtonId:" + a.attr("id") + "@#$dataNext:" + n + "@#$dataPrev:" + o + "@#$count:" + this.id + "@#$type:null@#$IsPartialView:false"; $.ajax({ type: "GET", url: "/SearchData/cShowMatchedItesDetailsView?Parameters=" + ConvertEncrypte(encodeURI(r)).split("+").join("***"), dataType: "HTML", success: function (a) { $("#MatchDetailModalMain").html(a), DraggableModalPopup("#MatchDetailModal") } }) }), $("body").on("click", ".currentRow", function () { $(".currentRow").each(function () { $(this).removeClass("current") }), $(this).addClass("current"); var a = "#" + $(this).attr("id"); a.indexOf("-2") > -1 ? (a = a.substr(0, a.length - 2), $(a).addClass("current")) : (a += "-2", $(a).addClass("current")) }), $("body").on("click", "#btnSearchData", function () { var a = $("#txtCompany").val(), e = $("select#Country").prop("selectedIndex"), t = 0; if ("" == a ? ($("#spnCompany").show(), $(".GoogleMapPopUp").hide(), t++) : $("#spnCompany").hide(), 0 == e ? ($("#spnCountry").show(), t++) : $("#spnCountry").hide(), t > 0) return $("#divSearchData table").remove(), $("#divSearchData table").html("<p>No data are available</p>"), !1 }), $("body").on("click", ".btnSearchDUNS", function () { return $.magnificPopup.open({ preloader: !1, closeBtnInside: !0, type: "iframe", items: { src: "/SearchData/DUNSPopup" }, callbacks: { close: function () { } }, closeOnBgClick: !1, mainClass: "popupSearchDUNS" }), !1 }), $(function () { var a = $('input[name="__RequestVerificationToken"]').val(), e = $("#ActivateFeature").val(), t = $("#LicenseEnableInvestigations").val(), n = $("#APITypeForInvestigation").val(); null != t && "False" != t || (t = !0), "True" == t && "DirectPlus" != n && (t = !0), $.contextMenu({ selector: ".context-menu-one", callback: function (a, e) { }, events: { show: function (a) { setTimeout(function () { a.$menu.find(".context-menu-disabled > span").attr("title", e) }, 50) } }, items: { AddCompany: { name: addMatchAsCompany, callback: function () { var e = $(this).attr("data-val"); return $.ajax({ type: "POST", url: "/BadInputData/FillMatchData/", data: JSON.stringify({ matchRecord: e }), headers: { __RequestVerificationToken: a }, dataType: "json", contentType: "application/json", async: !1, success: function (a) { $.IsTagsLicenseAllow.toLowerCase(), $.ajax({ type: "GET", url: "/BadInputData/AddCompany", dataType: "HTML", async: !1, success: function (a) { $("#divProgress").hide(), $("#SearchDataAddCompanyModalMain").html(a), DraggableModalPopup("#SearchDataAddCompanyModal") } }) }, error: function (a, e, t) { } }), "context-menu-icon context-menu-icon-quit" } }, AddInvestigation: { name: investigateRecord, disabled: t, callback: function () { var a = $(this).attr("data-val"), e = JSON.parse(a), t = $(this).attr("data-Duns"), n = $(this).attr("data-Tags"), o = e.DnBOrganizationName, r = e.DnBStreetAddressLine, i = e.DnBPrimaryTownName, s = e.DnBPostalCode, d = e.DnBCountryISOAlpha2Code, l = e.DnBTradeStyleName, c = e.DnBOperatingStatus, p = ConvertEncrypte(encodeURI("InputId:@#$SrcId:@#$Duns:" + t + "@#$Tags:" + n + "@#$Company:" + o + "@#$Street:" + r + "@#$City:" + i + "@#$PostalCode:" + s + "@#$Country:" + d + "@#$TradeStyle:" + l + "@#$Status:" + c)).split("+").join("***"); return $.ajax({ type: "GET", url: "/ResearchInvestigation/iResearchInvestigationRecordsTargeted?Parameters=" + p, dataType: "HTML", async: !1, success: function (a) { $("#iResearchInvestigationRecordsTargetedModalMain").html(a), DraggableModalPopup("#iResearchInvestigationRecordsTargetedModal") } }), "context-menu-icon context-menu-icon-quit" } } } }), $(".context-menu-one").on("click", function (a) { return "context-menu-icon context-menu-icon-quit" }) }), $("body").on("click", "#btnBingSearch", function () { var a = $("#txtCompany").val(), e = $("#txtAddress").val(), t = $("#txtCity").val(), n = $("#txtState").val(), o = $("#txtPhone").val(), r = $("#txtZip").val(), i = (a = "" == a ? "" : a + " ") + (e = "" == e ? "" : e + " ") + (t = "" == t ? "" : t + " ") + (n = "" == n ? "" : n + " ") + (o = "" == o ? "" : o + " ") + (r = "" == r ? "" : r + " ") + $("#Country").val(); $.ajax({ type: "GET", url: "/SearchData/BingSearch?Parameters=" + ConvertEncrypte(encodeURI(i)).split("+").join("***"), dataType: "HTML", async: !1, success: function (a) { $("#divProgress").hide(), $("#BingSearchModalMain").html(a), DraggableModalPopup("#BingSearchModal") } }) }), $("body").on("click", ".btnDomainOrEmailSearch", function () { return $(".searchByAltFields").removeClass("open"), $.ajax({ type: "GET", url: "/SearchData/DomainOrEmailPopup?IsCleanSearch=" + !1, dataType: "HTML", async: !1, success: function (a) { $("#SearchByAltFieldsModalMain").html(a), DraggableModalPopup("#SearchByAltFieldsModal") } }), !1 }), $("body").on("change", "#Country", function () { changeLanguage($(this).val()), "DirectPlus" == $("#APItype").val() && LoadTypeAhead() }), $("body").on("click", ".GoogleMapPopUp", function () { return $.ajax({ type: "GET", url: "/SearchData/GoogleMapPopUp", dataType: "HTML", async: !1, success: function (a) { $("#GoogleMapPopUpModalMain").html(a), DraggableModalPopup("#GoogleMapPopUpModal") } }), !1 }), $("body").on("click", ".Enrichment", function () { var a = $(this).attr("data-dunsnumber"), e = $("#txtCompany").val().trim(), t = $("#txtAddress").val() ? $("#txtAddress").val() + " " + $("#txtAddress2").val() : $("#txtAddress2").val(), n = $("#txtCity").val(), o = $("#txtState").val(), r = $("#txtZip").val(), i = $("select#Country").val(), s = $("#txtPhone").val(), d = $(this).attr("data-country"), l = $("#SearchedRegNum").val(), c = $("#SearchedWebsite").val(), p = ConvertEncrypte(encodeURI("DunsNumber:" + a + "@#$Company:" + e + "@#$Address:" + t + "@#$City:" + n + "@#$State:" + o + "@#$Postal:" + r + "@#$CountryCode:" + i + "@#$SrcId:@#$Phone:" + s + "@#$Country:" + d + "@#$RegNo:" + l + "@#$Website:" + c)).split("+").join("***"); $.ajax({ type: "GET", url: "/StewardshipPortal/PreviewEnrichmentData?Parameters=" + p, dataType: "HTML", async: !1, success: function (a) { $("#EnrichmentDetailModalMain").html(a), DraggableModalPopup("#EnrichmentDetailModal") } }) }), $("body").on("click", "#btnGoogleSearch", function () { var a = $("#txtCompany").val(), e = $("#txtAddress").val(), t = $("#txtCity").val(), n = $("#txtState").val(), o = $("#txtPhone").val(), r = $("#txtZip").val(), i = "https://www.google.com/search?q=Establishment : " + ((a = "" == a ? "" : a + " ") + (e = "" == e ? "" : e + " ") + (t = "" == t ? "" : t + " ") + (n = "" == n ? "" : n + " ") + (o = "" == o ? "" : o + " ") + (r = "" == r ? "" : r + " ") + $("#Country").val()); window.open(i) }), $(document).on("click", "#btnValidateInputAddress", function () { var a = $("#txtAddress").val(), e = $("#txtCity").val(), t = $("#txtState").val(), n = $("#txtZip").val(), o = $("select#Country").val(), r = ""; null != a && "" != a && (r += a), null != e && "" != e && (r += "," + e), null != t && "" != t && (r += "," + t), null != n && "" != n && (r += "," + n), null != o && "" != o && (r += "," + o); var i = "Address:" + r + "@#$IsFromSearch:true", s = parent.ConvertEncrypte(encodeURI(i)).split("+").join("***"); $.ajax({ type: "GET", url: "/SearchData/ValidateGoogleMapPopUp?Parameters=" + s, dataType: "HTML", async: !1, success: function (a) { $("#GoogleMapModalMain").html(a), DraggableModalPopup("#GoogleMapModal") } }) }), $("body").on("click", "#btnSearchByAddress", function (a) { if ($(this).hasClass("disabled")) return !1; var e = $("#Country").val(), t = $("#txtAddress").val(), n = $("#txtAddress2").val(), o = $("#txtCity").val(), r = $("#txtState").val(), i = $("#txtPhone").val(), s = $("#txtZip").val(), d = $("#ExcludeNonHeadQuarters").prop("checked"), l = $("#ExcludeNonMarketable").prop("checked"), c = $("#ExcludeOutofBusiness").prop("checked"), p = $("#ExcludeUndeliverable").prop("checked"), u = $("#ExcludeUnreachable").prop("checked"), h = $('input[name="__RequestVerificationToken"]').val(), y = new FormData; y.append("CompanyName", ""), y.append("Country", e), y.append("Address", t), y.append("Address2", n), y.append("City", o), y.append("State", r), y.append("Phone", i), y.append("Zip", s), y.append("ExcludeNonHeadQuarters", d), y.append("ExcludeNonMarketable", l), y.append("ExcludeOutofBusiness", c), y.append("ExcludeUndeliverable", p), y.append("ExcludeUnreachable", u), y.append("__RequestVerificationToken", h), y.append("btnSearchData", "SearchByAddress"), SearchData(y) }), $("body").on("click", "#btnSearchByCompany", function (a) { if ($(this).hasClass("disabled")) return !1; var e = $("#Country").val(), t = $("#txtCompany").val(), n = $("#ExcludeNonHeadQuarters").prop("checked"), o = $("#ExcludeNonMarketable").prop("checked"), r = $("#ExcludeOutofBusiness").prop("checked"), i = $("#ExcludeUndeliverable").prop("checked"), s = $("#ExcludeUnreachable").prop("checked"), d = $('input[name="__RequestVerificationToken"]').val(), l = 0; "" == t ? ($("#spnCompany").show(), l++) : $("#spnCompany").hide(); var c = new FormData; if (c.append("CompanyName", t), c.append("Country", e), c.append("ExcludeNonHeadQuarters", n), c.append("ExcludeNonMarketable", o), c.append("ExcludeOutofBusiness", r), c.append("ExcludeUndeliverable", i), c.append("ExcludeUnreachable", s), c.append("__RequestVerificationToken", d), c.append("btnSearchData", "SearchByCompany"), l > 0) return $(".customTable.inlinetable.searchCleanData tbody td").remove(), $(".customTable.inlinetable.searchCleanData tbody").html("<tr><td class='noContain' colspan='11'>No data are available</td><tr>"), !1; SearchData(c) }), $("body").on("blur", "#txtCompany", function () { SetSearchByCompanyValidation() }), $("body").on("blur", "#txtAddress,#txtCity,#txtState,#txtZip", function () { SetSearchByAddressValidation() }), $("#txtCompany").keypress(function () { "DirectPlus" == $("#APItype").val() && LoadTypeAhead() });