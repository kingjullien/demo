!function (t, e, i, a) { function l(e, i) { this.obj = t(e), this.o = t.extend({}, t.fn[s].defaults, i), this.objId = this.obj.attr("id"), this.pwCtrls = ".jarviswidget-ctrls", this.widget = this.obj.find(this.o.widgets), this.toggleClass = this.o.toggleClass.split("|"), this.editClass = this.o.editClass.split("|"), this.fullscreenClass = this.o.fullscreenClass.split("|"), this.customClass = this.o.customClass.split("|"), this.init() } var s = "jarvisWidgets"; l.prototype = { _settings: function () { var t = this; storage = !!function () { var t, e = +new Date; try { return localStorage.setItem(e, e), t = localStorage.getItem(e) == e, localStorage.removeItem(e), t } catch (i) { } }() && localStorage, storage && t.o.localStorage && (t.o.ajaxnav === !0 ? (widget_url = location.hash.replace(/^#/, ""), keySettings = "Plugin_settings_" + widget_url + "_" + t.objId, getKeySettings = localStorage.getItem(keySettings), keyPosition = "Plugin_position_" + widget_url + "_" + t.objId, getKeyPosition = localStorage.getItem(keyPosition)) : (keySettings = "jarvisWidgets_settings_" + location.pathname + "_" + t.objId, getKeySettings = localStorage.getItem(keySettings), keyPosition = "jarvisWidgets_position_" + location.pathname + "_" + t.objId, getKeyPosition = localStorage.getItem(keyPosition))), clickEvent = "click" }, _runLoaderWidget: function (t) { var e = this; e.o.indicator === !0 && t.parents(e.o.widgets).find(".jarviswidget-loader").stop(!0, !0).fadeIn(100).delay(e.o.indicatorTime).fadeOut(100) }, _getPastTimestamp: function (t) { var e = this, i = new Date(t), a = i.getMonth() + 1, l = i.getDate(), s = i.getFullYear(), o = i.getHours(), n = i.getMinutes(), r = i.getUTCSeconds(); 10 > a && (a = "0" + a), 10 > l && (l = "0" + l), 10 > o && (o = "0" + o), 10 > n && (n = "0" + n), 10 > r && (r = "0" + r); var d = e.o.timestampFormat.replace(/%d%/g, l).replace(/%m%/g, a).replace(/%y%/g, s).replace(/%h%/g, o).replace(/%i%/g, n).replace(/%s%/g, r); return d }, _loadAjaxFile: function (e, i, a) { var l = this; e.find(".widget-body").load(i, function (i, a, s) { var o = t(this); if ("error" == a && o.html('<h4 class="alert alert-danger">' + l.o.labelError + "<b> " + s.status + " " + s.statusText + "</b></h4>"), "success" == a) { var n = e.find(l.o.timestampPlaceholder); n.length && n.html(l._getPastTimestamp(new Date)), "function" == typeof l.o.afterLoad && l.o.afterLoad.call(this, e) } }), l._runLoaderWidget(a) }, _saveSettingsWidget: function () { var e = this; if (e._settings(), storage && e.o.localStorage) { var i = []; e.obj.find(e.o.widgets).each(function () { var e = {}; e.id = t(this).attr("id"), e.style = t(this).attr("data-widget-attstyle"), e.title = t(this).children("header").children("h2").text(), e.hidden = t(this).is(":hidden") ? 1 : 0, e.collapsed = t(this).hasClass("jarviswidget-collapsed") ? 1 : 0, i.push(e) }), storeSettingsObj = JSON.stringify({ widget: i }), getKeySettings != storeSettingsObj && localStorage.setItem(keySettings, storeSettingsObj) } "function" == typeof e.o.onSave && e.o.onSave.call(this, null, storeSettingsObj) }, _savePositionWidget: function () { var e = this; if (e._settings(), storage && e.o.localStorage) { var i = []; e.obj.find(e.o.grid + ".sortable-grid").each(function () { var a = []; t(this).children(e.o.widgets).each(function () { var e = {}; e.id = t(this).attr("id"), a.push(e) }); var l = { section: a }; i.push(l) }); var a = JSON.stringify({ grid: i }); getKeyPosition != a && localStorage.setItem(keyPosition, a, null) } "function" == typeof e.o.onSave && e.o.onSave.call(this, a) }, init: function () { var e = this; if (e._settings(), !t("#" + e.objId).length, e.o.rtl === !0 && t("body").addClass("rtl"), t(e.o.grid).each(function () { t(this).find(e.o.widgets).length && t(this).addClass("sortable-grid") }), storage && e.o.localStorage && getKeyPosition) { var i = JSON.parse(getKeyPosition); for (var l in i.grid) { var s = e.obj.find(e.o.grid + ".sortable-grid").eq(l); for (var o in i.grid[l].section) s.append(t("#" + i.grid[l].section[o].id)) } } if (storage && e.o.localStorage && getKeySettings) { var n = JSON.parse(getKeySettings); for (var l in n.widget) { var r = t("#" + n.widget[l].id); n.widget[l].style && r.removeClassPrefix("jarviswidget-color-").addClass(n.widget[l].style).attr("data-widget-attstyle", "" + n.widget[l].style), 1 == n.widget[l].hidden ? r.hide(1) : r.show(1).removeAttr("data-widget-hidden"), 1 == n.widget[l].collapsed && r.addClass("jarviswidget-collapsed").children("div").hide(1), r.children("header").children("h2").text() != n.widget[l].title && r.children("header").children("h2").text(n.widget[l].title) } } if (e.widget.each(function () { var i, l, s, o, n, r, d, g, c = t(this), h = t(this).children("header"); if (!h.parent().attr("role")) { c.data("widget-hidden") === !0 && c.hide(), c.data("widget-collapsed") === !0 && c.addClass("jarviswidget-collapsed").children("div").hide(), i = e.o.customButton === !0 && c.data("widget-custombutton") === a && 0 !== e.customClass[0].length ? '<a href="javascript:void(0);" class="button-icon jarviswidget-custom-btn"><i class="' + e.customClass[0] + '"></i></a>' : "", l = e.o.deleteButton === !0 && c.data("widget-deletebutton") === a ? '<a href="javascript:void(0);" class="button-icon jarviswidget-delete-btn" rel="tooltip" title="Delete" data-placement="bottom"><i class="' + e.o.deleteClass + '"></i></a>' : "", s = e.o.editButton === !0 && c.data("widget-editbutton") === a ? '<a href="javascript:void(0);" class="button-icon jarviswidget-edit-btn" rel="tooltip" title="Edit Title" data-placement="bottom"><i class="' + e.editClass[0] + '"></i></a>' : "", o = e.o.fullscreenButton === !0 && c.data("widget-fullscreenbutton") === a ? '<a href="javascript:void(0);" class="button-icon jarviswidget-fullscreen-btn" rel="tooltip" title="Fullscreen" data-placement="bottom"><i class="' + e.fullscreenClass[0] + '"></i></a>' : "", e.o.colorButton === !0 && c.data("widget-colorbutton") === a ? (n = '<a data-toggle="dropdown" class="dropdown-toggle color-box selector" href="javascript:void(0);"></a><ul class="dropdown-menu arrow-box-up-right color-select pull-right"><li><span class="bg-color-green" data-widget-setstyle="jarviswidget-color-green" rel="tooltip" data-placement="left" data-original-title="Green Grass"></span></li><li><span class="bg-color-greenDark" data-widget-setstyle="jarviswidget-color-greenDark" rel="tooltip" data-placement="top" data-original-title="Dark Green"></span></li><li><span class="bg-color-greenLight" data-widget-setstyle="jarviswidget-color-greenLight" rel="tooltip" data-placement="top" data-original-title="Light Green"></span></li><li><span class="bg-color-purple" data-widget-setstyle="jarviswidget-color-purple" rel="tooltip" data-placement="top" data-original-title="Purple"></span></li><li><span class="bg-color-magenta" data-widget-setstyle="jarviswidget-color-magenta" rel="tooltip" data-placement="top" data-original-title="Magenta"></span></li><li><span class="bg-color-pink" data-widget-setstyle="jarviswidget-color-pink" rel="tooltip" data-placement="right" data-original-title="Pink"></span></li><li><span class="bg-color-pinkDark" data-widget-setstyle="jarviswidget-color-pinkDark" rel="tooltip" data-placement="left" data-original-title="Fade Pink"></span></li><li><span class="bg-color-blueLight" data-widget-setstyle="jarviswidget-color-blueLight" rel="tooltip" data-placement="top" data-original-title="Light Blue"></span></li><li><span class="bg-color-teal" data-widget-setstyle="jarviswidget-color-teal" rel="tooltip" data-placement="top" data-original-title="Teal"></span></li><li><span class="bg-color-blue" data-widget-setstyle="jarviswidget-color-blue" rel="tooltip" data-placement="top" data-original-title="Ocean Blue"></span></li><li><span class="bg-color-blueDark" data-widget-setstyle="jarviswidget-color-blueDark" rel="tooltip" data-placement="top" data-original-title="Night Sky"></span></li><li><span class="bg-color-darken" data-widget-setstyle="jarviswidget-color-darken" rel="tooltip" data-placement="right" data-original-title="Night"></span></li><li><span class="bg-color-yellow" data-widget-setstyle="jarviswidget-color-yellow" rel="tooltip" data-placement="left" data-original-title="Day Light"></span></li><li><span class="bg-color-orange" data-widget-setstyle="jarviswidget-color-orange" rel="tooltip" data-placement="bottom" data-original-title="Orange"></span></li><li><span class="bg-color-orangeDark" data-widget-setstyle="jarviswidget-color-orangeDark" rel="tooltip" data-placement="bottom" data-original-title="Dark Orange"></span></li><li><span class="bg-color-red" data-widget-setstyle="jarviswidget-color-red" rel="tooltip" data-placement="bottom" data-original-title="Red Rose"></span></li><li><span class="bg-color-redLight" data-widget-setstyle="jarviswidget-color-redLight" rel="tooltip" data-placement="bottom" data-original-title="Light Red"></span></li><li><span class="bg-color-white" data-widget-setstyle="jarviswidget-color-white" rel="tooltip" data-placement="right" data-original-title="Purity"></span></li><li><a href="javascript:void(0);" class="jarviswidget-remove-colors" data-widget-setstyle="" rel="tooltip" data-placement="bottom" data-original-title="Reset widget color to default">Remove</a></li></ul>', h.prepend('<div class="widget-toolbar">' + n + "</div>")) : n = "", e.o.toggleButton === !0 && c.data("widget-togglebutton") === a ? (d = c.data("widget-collapsed") === !0 || c.hasClass("jarviswidget-collapsed") ? e.toggleClass[1] : e.toggleClass[0], r = '<a href="#" class="button-icon jarviswidget-toggle-btn" rel="tooltip" title="Collapse" data-placement="bottom"><i class="' + d + '"></i></a>') : r = "", g = e.o.refreshButton === !0 && c.data("widget-refreshbutton") !== !1 && c.data("widget-load") ? '<a href="#" class="button-icon jarviswidget-refresh-btn" data-loading-text="&nbsp;&nbsp;Loading...&nbsp;" rel="tooltip" title="Refresh" data-placement="bottom"><i class="' + e.o.refreshButtonClass + '"></i></a>' : ""; var p = e.o.buttonOrder.replace(/%refresh%/g, g).replace(/%delete%/g, l).replace(/%custom%/g, i).replace(/%fullscreen%/g, o).replace(/%edit%/g, s).replace(/%toggle%/g, r); ("" !== g || "" !== l || "" !== i || "" !== o || "" !== s || "" !== r) && h.prepend('<div class="jarviswidget-ctrls">' + p + "</div>"), e.o.sortable === !0 && c.data("widget-sortable") === a && c.addClass("jarviswidget-sortable"), c.find(e.o.editPlaceholder).length && c.find(e.o.editPlaceholder).find("input").val(t.trim(h.children("h2").text())), h.append('<span class="jarviswidget-loader"><i class="fa fa-refresh fa-spin"></i></span>'), c.attr("role", "widget").children("div").attr("role", "content").prev("header").attr("role", "heading").children("div").attr("role", "menu") } }), e.o.buttonsHidden === !0 && t(e.o.pwCtrls).hide(), t(".jarviswidget header [rel=tooltip]").tooltip(), e.obj.find("[data-widget-load]").each(function () { var i = t(this), a = i.children(), l = i.data("widget-load"), s = 1e3 * i.data("widget-refresh"); i.children(); i.find(".jarviswidget-ajax-placeholder").length || (i.children("widget-body").append('<div class="jarviswidget-ajax-placeholder">' + e.o.loadingLabel + "</div>"), i.data("widget-refresh") > 0 ? (e._loadAjaxFile(i, l, a), t.intervalArr.push(setInterval(function () { e._loadAjaxFile(i, l, a) }, s))) : e._loadAjaxFile(i, l, a)) }), e.o.sortable === !0 && jQuery.ui) { var d = e.obj.find(".sortable-grid").not("[data-widget-excludegrid]"); d.sortable({ items: d.find(".jarviswidget-sortable"), connectWith: d, placeholder: e.o.placeholderClass, cursor: "move", revert: !0, opacity: e.o.opacity, delay: 200, cancel: ".button-icon, #jarviswidget-fullscreen-mode > div", zIndex: 1e4, handle: e.o.dragHandle, forcePlaceholderSize: !0, forceHelperSize: !0, update: function (t, i) { e._runLoaderWidget(i.item.children()), e._savePositionWidget(), "function" == typeof e.o.onChange && e.o.onChange.call(this, i.item) } }) } e.o.buttonsHidden === !0 && e.widget.children("header").hover(function () { t(this).children(e.o.pwCtrls).stop(!0, !0).fadeTo(100, 1) }, function () { t(this).children(e.o.pwCtrls).stop(!0, !0).fadeTo(100, 0) }), e._clickEvents(), t(e.o.deleteSettingsKey).on(clickEvent, this, function (t) { if (storage && e.o.localStorage) { var i = confirm(e.o.settingsKeyLabel); i && localStorage.removeItem(keySettings) } t.preventDefault() }), t(e.o.deletePositionKey).on(clickEvent, this, function (t) { if (storage && e.o.localStorage) { var i = confirm(e.o.positionKeyLabel); i && localStorage.removeItem(keyPosition) } t.preventDefault() }), storage && e.o.localStorage && ((null === getKeySettings || getKeySettings.length < 1) && e._saveSettingsWidget(), (null === getKeyPosition || getKeyPosition.length < 1) && e._savePositionWidget()) }, _clickEvents: function () { function i() { if (t("#jarviswidget-fullscreen-mode").length) { var i = t(e).height(), l = t("#jarviswidget-fullscreen-mode").find(a.o.widgets).children("header").height(); t("#jarviswidget-fullscreen-mode").find(a.o.widgets).children("div").height(i - l - 15) } } var a = this; a._settings(), a.widget.on(clickEvent, ".jarviswidget-toggle-btn", function (e) { var i = t(this), l = i.parents(a.o.widgets); a._runLoaderWidget(i), l.hasClass("jarviswidget-collapsed") ? i.children().removeClass(a.toggleClass[1]).addClass(a.toggleClass[0]).parents(a.o.widgets).removeClass("jarviswidget-collapsed").children("[role=content]").slideDown(a.o.toggleSpeed, function () { a._saveSettingsWidget() }) : i.children().removeClass(a.toggleClass[0]).addClass(a.toggleClass[1]).parents(a.o.widgets).addClass("jarviswidget-collapsed").children("[role=content]").slideUp(a.o.toggleSpeed, function () { a._saveSettingsWidget() }), "function" == typeof a.o.onToggle && a.o.onToggle.call(this, l), e.preventDefault() }), a.widget.on(clickEvent, ".jarviswidget-fullscreen-btn", function (e) { var l = t(this).parents(a.o.widgets), s = l.children("div"); a._runLoaderWidget(t(this)), t("#jarviswidget-fullscreen-mode").length ? (t(".nooverflow").removeClass("nooverflow"), l.unwrap("<div>").children("div").removeAttr("style").end().find(".jarviswidget-fullscreen-btn").children().removeClass(a.fullscreenClass[1]).addClass(a.fullscreenClass[0]).parents(a.pwCtrls).children("a").show(), s.hasClass("jarviswidget-visible") && s.hide().removeClass("jarviswidget-visible")) : (t("body").addClass("nooverflow"), l.wrap('<div id="jarviswidget-fullscreen-mode"/>').parent().find(".jarviswidget-fullscreen-btn").children().removeClass(a.fullscreenClass[0]).addClass(a.fullscreenClass[1]).parents(a.pwCtrls).children("a:not(.jarviswidget-fullscreen-btn)").hide(), s.is(":hidden") && s.show().addClass("jarviswidget-visible")), i(), "function" == typeof a.o.onFullscreen && a.o.onFullscreen.call(this, l), e.preventDefault() }), t(e).resize(function () { i() }), a.widget.on(clickEvent, ".jarviswidget-edit-btn", function (e) { var i = t(this).parents(a.o.widgets); a._runLoaderWidget(t(this)), i.find(a.o.editPlaceholder).is(":visible") ? t(this).children().removeClass(a.editClass[1]).addClass(a.editClass[0]).parents(a.o.widgets).find(a.o.editPlaceholder).slideUp(a.o.editSpeed, function () { a._saveSettingsWidget() }) : t(this).children().removeClass(a.editClass[0]).addClass(a.editClass[1]).parents(a.o.widgets).find(a.o.editPlaceholder).slideDown(a.o.editSpeed), "function" == typeof a.o.onEdit && a.o.onEdit.call(this, i), e.preventDefault() }), t(a.o.editPlaceholder).find("input").keyup(function () { t(this).parents(a.o.widgets).children("header").children("h2").text(t(this).val()) }), a.widget.on(clickEvent, "[data-widget-setstyle]", function (e) { var i = t(this).data("widget-setstyle"), l = ""; t(this).parents(a.o.editPlaceholder).find("[data-widget-setstyle]").each(function () { l += t(this).data("widget-setstyle") + " " }), t(this).parents(a.o.widgets).attr("data-widget-attstyle", "" + i).removeClassPrefix("jarviswidget-color-").addClass(i), a._runLoaderWidget(t(this)), a._saveSettingsWidget(), e.preventDefault() }), a.widget.on(clickEvent, ".jarviswidget-custom-btn", function (e) { var i = t(this).parents(a.o.widgets); a._runLoaderWidget(t(this)), t(this).children("." + a.customClass[0]).length ? (t(this).children().removeClass(a.customClass[0]).addClass(a.customClass[1]), "function" == typeof a.o.customStart && a.o.customStart.call(this, i)) : (t(this).children().removeClass(a.customClass[1]).addClass(a.customClass[0]), "function" == typeof a.o.customEnd && a.o.customEnd.call(this, i)), a._saveSettingsWidget(), e.preventDefault() }), a.widget.on(clickEvent, ".jarviswidget-delete-btn", function (e) { var i = t(this).parents(a.o.widgets), l = i.attr("id"), s = i.children("header").children("h2").text(); t.SmartMessageBox({ title: "<i class='fa fa-times' style='color:#ed1c24'></i> " + a.o.labelDelete + ' "' + s + '"', content: "Warning: This action cannot be undone", buttons: "[No][Yes]" }, function (e) { "Yes" == e && (a._runLoaderWidget(t(this)), t("#" + l).fadeOut(a.o.deleteSpeed, function () { t(this).remove(), "function" == typeof a.o.onDelete && a.o.onDelete.call(this, i) })) }), e.preventDefault() }), a.widget.on(clickEvent, ".jarviswidget-refresh-btn", function (e) { var i = t(this).parents(a.o.widgets), l = i.data("widget-load"), s = i.children(), o = t(this); o.button("loading"), s.addClass("widget-body-ajax-loading"), setTimeout(function () { o.button("reset"), s.removeClass("widget-body-ajax-loading"), a._loadAjaxFile(i, l, s) }, 1e3), e.preventDefault() }) }, destroy: function () { var t = this; t.widget.off("click", t._clickEvents()), t.obj.removeData(s) } }, t.fn[s] = function (e) { return this.each(function () { var i = t(this), a = i.data(s), o = "object" == typeof e && e; a || i.data(s, a = new l(this, o)), "string" == typeof e && a[e]() }) }, t.fn[s].defaults = { grid: "section", widgets: ".jarviswidget", localStorage: !0, deleteSettingsKey: "", settingsKeyLabel: "Reset settings?", deletePositionKey: "", positionKeyLabel: "Reset position?", sortable: !0, buttonsHidden: !1, toggleButton: !0, toggleClass: "min-10 | plus-10", toggleSpeed: 200, onToggle: function () { }, deleteButton: !0, deleteClass: "trashcan-10", deleteSpeed: 200, onDelete: function () { }, editButton: !0, editPlaceholder: ".jarviswidget-editbox", editClass: "pencil-10 | delete-10", editSpeed: 200, onEdit: function () { }, colorButton: !0, fullscreenButton: !0, fullscreenClass: "fullscreen-10 | normalscreen-10", fullscreenDiff: 3, onFullscreen: function () { }, customButton: !0, customClass: "", customStart: function () { }, customEnd: function () { }, buttonOrder: "%refresh% %delete% %custom% %edit% %fullscreen% %toggle%", opacity: 1, dragHandle: "> header", placeholderClass: "jarviswidget-placeholder", indicator: !0, indicatorTime: 600, ajax: !0, loadingLabel: "loading...", timestampPlaceholder: ".jarviswidget-timestamp", timestampFormat: "Last update: %m%/%d%/%y% %h%:%i%:%s%", refreshButton: !0, refreshButtonClass: "refresh-10", labelError: "Sorry but there was a error:", labelUpdated: "Last Update:", labelRefresh: "Refresh", labelDelete: "Delete widget:", afterLoad: function () { }, rtl: !1, onChange: function () { }, onSave: function () { }, ajaxnav: !0 }, t.fn.removeClassPrefix = function (e) { return this.each(function (i, a) { var l = a.className.split(" ").map(function (t) { return 0 === t.indexOf(e) ? "" : t }); a.className = t.trim(l.join(" ")) }), this } }(jQuery, window, document);